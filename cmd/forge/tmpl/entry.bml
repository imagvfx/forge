<!doctype html>
<meta name="viewport" content="width=device-width" initial-scale="1">

<html> [
	<head> [
		<style> [`{{template "style.css"}}`]
		<style> [`{{template "entry.bml.css" .}}`]
	]
	<body> [
		{{template "nav.bml" $}}
		<div class="main"> [
			<div style="width:16rem;background-color:#FAFAFA;border-right:1.5px solid #EEE;" class="left"> [
				<!-- Pinned Path -->
				<div style="display:flex;padding:1.5rem;align-items:center;"> [
					<div style="font-size:1rem;color:#555;margin-right:0.5rem;"> [Pinned]
					<div id="pinnedPathDeleteButton" class="nodisplay" style="border-radius:0.1rem;border:1px solid #DDD;padding:0 0.1rem;font-size:0.7rem;color:#DDD;"> [del]
				]
				<div id="pinnedPathDropZone" style="padding:0 1.5rem;font-size:0.9rem;"> [
					{{range $i, $p := $.UserSetting.PinnedPaths}}
					<div id="pinnedPath-{{$p}}" class="pinnedPathLink" draggable="true" data-link="{{$p}}" data-idx="{{$i}}" style="margin:0.2rem 0;cursor:pointer;color:#555"> [{{$p}}]
					{{end}}
				]
			]
			<div class="right"> [
				<!-- Search Related -->
				<div style="display:flex;flex-wrap:wrap;padding:1.5rem;background-color:#F4F4F4;border-bottom:1.5px solid #EEE;"> [
					<div style="flex:3;"> [
					<div style="font-size:2rem"> [
						<a href="/{{topName $.Entry.Path}}"> [<b> [{{topName $.Entry.Path}}]]
					]
					<!-- Quick Search -->
					<div id="quickSearch"> [
						<div style="display:flex;margin-bottom:0.5rem;"> [
							<div id="quickSearchLabel" style="font-size:0.8rem;color:#AAA;margin-right:1rem;"> [quick search]
							<div id="quickSearchDeleteButton" class="nodisplay" style="border-radius:0.1rem;border:1px solid #DDD;padding:0 0.1rem;font-size:0.7rem;color:#DDD;"> [del]
						]
						<div id="quickSearchDropZone" style="display:flex;flex-wrap:wrap;font-size:1rem;"> [
						{{range $i, $search := $.UserSetting.QuickSearches -}}
							<div id="quickSearch-{{$search.K}}" class="quickSearchLink" style="color:#555;cursor:pointer;margin-right:1rem;" data-idx="{{$i}}" data-link="/{{topName $.Entry.Path}}?search=1&{{toURL $search.V}}" draggable="true"> [{{$search.K}}]
						{{- end}}
						]
					]
					]
					<!-- Search Box -->
					<div style="flex:1;"> [
						<form action="/{{topName $.Entry.Path}}" style="display:flex;"> [
							<input hidden name="search" value="1"> []
							<select name="search_entry_type" class="search-box-left"> [
								<option value=""> [(any)]
							{{range $t := $.BaseEntryTypes}}
								{{if ne $t "root"}}
								<option value="{{$t}}" {{if eq $t $.SearchEntryType}}selected{{end}}> [{{$t}}]
								{{end}}
							{{end}}
							]
							<input name="search_query" type="text" class="search-box-center" style="flex:1;min-width:10rem" placeholder="search" value="{{$.SearchQuery}}"> []
							<button class="search-box-right" style="background-color:inherit"> [Go]
						]
						{{if $.ResultsFromSearch}}
						<div style="height:0.2rem"> []
						<form action="/api/update-user-setting" style="display:flex;justify-content:end;color:#AAA;" method="post"> [
							<input name="user" type="hidden" value="{{$.User}}"> []
							<input name="quick_search_name" style="width:7rem;border-radius:2px;background-color:inherit;font-size:0.7rem;border: 1px solid rgba(1, 1, 1, 0);" placeholder="add to quick search" value=""> []
							<input name="quick_search_value" type="hidden" value="search_entry_type={{$.SearchEntryType}}&search_query={{$.SearchQuery}}"> []
							<button name="update_quick_search" value="1" hidden> []
							<input readonly name="back_to_referer" type="hidden" value="1"> []
						]
						{{end}}
					]
				]
				{{if not $.ResultsFromSearch}}
				<!-- This Entry -->
				<div class="mainEntry entry" data-entry-path="{{$.Entry.Path}}" style="padding:1.5rem;background-color:#FAFAFA;border-bottom:1.5px solid #EEE"> [
					<div class="mainEntryTop"> [
						<div class="mainEntryTitle"> [
							{{pathLinks $.Entry.Path}}
						]
						<div class="mainEntryFunctions"> [
							<form id="uploadExcelForm" action="/api/bulk-update" method="post" enctype="multipart/form-data"> [
								<input name="path" type="hidden" value="{{$.Entry.Path}}"> []
								<input id="uploadExcelInput" class="nodisplay" name="file" type="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"> []
								<label for="uploadExcelInput" class="uploadExcelButton" style="cursor:pointer;"> [Update With Excel]
								<input readonly name="back_to_referer" type="hidden" value="1"> []
							]
							<form action="/api/update-user-setting" method="POST"> [
								<input name="pinned_path" type="hidden" value="{{$.Entry.Path}}">
								<input name="pinned_path_at" type="hidden" value="{{if $.EntryPinned}}-1{{else}}{{len $.UserSetting.PinnedPaths}}{{end}}"> []
								<button id="updatePinnedPathButton" name="update_pinned_path" value="1" hidden> []
								<label for="updatePinnedPathButton" style="cursor:pointer;"> [{{if $.EntryPinned}}Unpin{{else}}Pin{{end}}]
								<input readonly name="back_to_referer" type="hidden" value="1"> []
							]
							<form action="/api/rename-entry" method="post"> [
								<input name="path" type="hidden" value="{{$.Entry.Path}}"> []
								<input id="renameInput" class="nodisplay" name="new-name" type="text" value="{{$.Entry.Name}}"> []
								<input readonly name="back_to_referer" type="hidden" value="1"> []
							]
							<label id="rename-display-toggle" class="item-box" style="cursor:pointer" onclick="toggleRenameInput()"> [Rename]
							<label class="item-box" style="color:#A22;cursor:pointer" onclick="openDeleteEntryDialog('{{$.Entry.Path}}')"> [Delete]
						]
					]
					<div class="mainEntryBottom"> [
						<div class="mainEntryThumbnailContainer"> [
							{{$thumbnailPath := index $.ThumbnailPath $.Entry.Path}}
							<div class="thumbnail {{if $.Entry.HasThumbnail}}exists{{else if $thumbnailPath}}inherited{{end}}" style="display:flex"> [
								<div class="thumbnailContainer"> [
									<img class="thumbnailImg" src="/thumbnail{{$thumbnailPath}}" width="128px" height="72px"> []
								]
								<form class="updateThumbnailForm" action="/api/{{if $.Entry.HasThumbnail}}update{{else}}add{{end}}-thumbnail" method="POST" enctype="multipart/form-data"> [
									<input name="path" type="hidden" value="{{$.Entry.Path}}"> []
									<label class="updateThumbnailButton thumbnailButton"> [+
										<input class="updateThumbnailInput nodisplay" name="file" type="file" accept="image/jpeg, image/png"> []
									]
									<input readonly name="back_to_referer" type="hidden" value="1"> []
								]
								<form class="deleteThumbnailForm" action="/api/delete-thumbnail" method="POST"> [
									<input name="path" type="hidden" value="{{$.Entry.Path}}"> []
									<label class="deleteThumbnailButton thumbnailButton"> [-]
									<input readonly name="back_to_referer" type="hidden" value="1"> []
								]
							]
						]
						<div class="mainEntryInfoContainer" data-selected-category="{{$.UserSetting.EntryPageSelectedCategory}}"> [
							<!-- Property Expand Toggle -->
							<div class="mainEntryInfoCategoryToggles"> [
								<div class="infoCategoryToggle" data-category="property"> [
									<div class="infoSelector"> [Property ({{len $.Properties}})]
									<div class="infoAdder"> [+]
								]
								<div class="infoCategoryToggle" data-category="environ"> [
									<div class="infoSelector"> [Environ ({{len $.Environs}})]
									<div class="infoAdder"> [+]
								]
								<div class="infoCategoryToggle" data-category="access"> [
									<div class="infoSelector"> [Access ({{len $.AccessControls}})]
									<div class="infoAdder"> [+]
								]
							]
							<!-- Property / Environ / Access Items -->
							<div class="mainEntryInfos"> [
								{{$props := index $.EntryProperties $.Entry.Path}}
								{{$propFilters := index $.PropertyFilters $.Entry.Type}}
								{{range $name := $propFilters}}
									{{$p := index $props $name}}
									<div class="mainEntryInfo info {{if not $p}}invalid{{end}}" data-category="property" {{if $p}}data-name="{{$p.Name}}" data-type="{{$p.Type}}" data-value="{{$p.Value}}"{{end}}> [
										<div class="infoTop"> [
											<div class="infoTitle"> [
												<div> [{{$p.Name}}]
												<div class="recentlyUpdatedDot {{if not (recentlyUpdated $p)}}invisible{{end}}"> []
											]
											<div class="infoContextMenuLoader"> [&middot;&middot;&middot;]
										]
										<div style="height:0.2rem"> []
										<div class="{{if $p.ValueError}}invalid{{end}} infoValue"> [{{brLines $p.Value}}{{$p.ValueError}}]
									]
								{{end}}
								{{range $e := $.Environs}}
								<div class="mainEntryInfo info" data-category="environ" {{if $e}}data-name="{{$e.Name}}" data-type="{{$e.Type}}" data-value="{{$e.Value}}"{{end}}> [
									<div class="infoTop"> [
										<div class="infoTitle"> [
											{{if ne $e.EntryPath $.Entry.Path}}<img class="inheritedInfoIcon" src="/asset/inherit.svg" width="8px" title="Inherited from {{$e.EntryPath}}">[]{{end}}
											<div> [{{$e.Name}}]
											<div class="recentlyUpdatedDot {{if not (recentlyUpdated $e)}}invisible{{end}}"> []
										]
										<div class="infoContextMenuLoader"> [&middot;&middot;&middot;]
									]
									<div style="height:0.2rem"> []
									<div class="{{if $e.ValueError}}invalid{{end}} infoValue"> [{{brLines $e.Value}}{{$e.ValueError}}]
								]
								{{end}}
								{{range $a := $.AccessControls}}
								<div class="mainEntryInfo info" data-category="access" {{if $a}}data-name="{{$a.Accessor}}" data-type="{{$a.AccessorType}}" data-value="{{$a.Mode}}"{{end}}> [
									<div class="infoTop"> [
										<div class="infoTitle"> [
											{{if ne $a.EntryPath $.Entry.Path}}<img class="inheritedInfoIcon" src="/asset/inherit.svg" width="8px" title="Inherited from {{$a.EntryPath}}">[]{{end}}
											<div> [{{$a.Accessor}}]
											<div class="recentlyUpdatedDot {{if not (recentlyUpdated $a)}}invisible{{end}}"> []
										]
										<div class="infoContextMenuLoader"> [&middot;&middot;&middot;]
									]
									<div class="infoValue"> [{{$a.Mode}}]
								]
								{{end}}
							]
						]
					]
				]
				{{end}}
				<div class="subEntryArea"> [
				{{if $.ResultsFromSearch}}
					{{if not $.SubEntriesByTypeByParent}}No search results{{end}}
				{{end}}
				{{$i := 0}}
				{{range $entType, $entsByParent := $.SubEntriesByTypeByParent}}
					<div> [
						{{if $i}}
						<div style="margin-top:3rem;margin-bottom:3rem;border-top:1px solid #DDD"> []
						{{end}}
						{{if not $.ResultsFromSearch}}
						<div style="display:flex;align-items:center;flex-wrap:wrap;gap:2rem;margin-top:1rem;margin-bottom:1rem;"> [
							<div style="font-size:1.2rem"> [<b> [{{$entType}} ({{len (index $entsByParent $.Entry.Path)}})]]
							<!-- Add SubEntry -->
							<form class="addSubEntryForm" data-parent="{{$.Entry.Path}}" data-type="{{$entType}}" action="/api/add-entry" style="display:flex" method="POST"> [
								<input name="name" style="border:1px solid #DDD;border-right:0;border-radius:2px 0 0 2px" placeholder="name"> []
								<button style="border:1px solid #DDD;border-radius:0 2px 2px 0"> [+]
								<input readonly name="back_to_referer" type="hidden" value="1"> []
							]
							<!-- Property Filter -->
							<form action="/api/update-user-setting" style="flex:1;display:flex" method="POST"> [
								<input name="entry_page_entry_type" type="hidden" value="{{$entType}}"> []
								<input name="entry_page_property_filter" type="text" style="flex:1;border:1px solid #DDD;border-radius:2px;width:20rem" value="{{index $.UserSetting.EntryPagePropertyFilter $entType}}" placeholder="filter"> []
								<button class="nodisplay" name="update_filter" value="1"> []
								<input readonly name="back_to_referer" type="hidden" value="1"> []
							]
							<!-- Sort -->
							<form action="/api/update-user-setting" style="display:flex;align-items:center" method="POST"> [
								<input name="entry_page_entry_type" type="hidden" value="{{$entType}}"> []
								{{$sortProp := index $.UserSetting.EntryPageSortProperty $entType}}
								{{$prop := sortProperty $sortProp}}
								{{$desc := sortDesc $sortProp}}
								<select name="entry_page_sort_property" style="appearance:none;margin-right:0.5rem;min-width:6rem;border:1px solid #DDD;border-radius:2px;"> [
									<option value=""> [(name)]
								{{range $p := index $.DefaultProperties $entType}}
									<option value="{{$p}}" {{if eq $p $prop}}selected{{end}}> [{{$p}}]
								{{end}}
								]
								<input id="sort_desc_cb" name="entry_page_sort_desc" style="margin:0;width:1.2rem;border-radius:2px 0 0 2px;background-color:#F3F3F3;height:20px" type="checkbox" {{if $desc}}checked{{end}}> []
								<button name="update_sort" style="appearance:none;border:1px solid #DDD;border-left:0;border-radius:0 2px 2px 0;background-color:#F3F3F3" value="1"> [Sort]
								<input readonly name="back_to_referer" type="hidden" value="1"> []
							]
						]
						{{end}}
						{{$j := 0}}
						{{range $parent, $subEntries := $entsByParent}}
							{{if $subEntries}}
								{{if $j}}
								<div style="height:1rem"> []
								{{end}}
								{{if $.ResultsFromSearch}}
								<div class="subEntryListFrom"> [From <a href="{{$parent}}"> [{{$parent}}] ({{len $subEntries}})]
								{{end}}
								<!-- Sub Entries -->
								<div class="subEntryList"> [
									{{$propFilters := index $.PropertyFilters $entType}}
									{{range $k, $ent := $subEntries}}
									{{$props := index $.EntryProperties $ent.Path}}
									{{$possibleSubTypes := ""}}
									{{with $t := index (index $.EntryProperties $ent.Path) ".sub_entry_types"}}
										{{$possibleSubTypes = trim $t.Value}}
									{{end}}
									<div class="subEntry entry" data-entry-path="{{$ent.Path}}" data-entry-type="{{$ent.Type}}" data-possible-sub-types={{$possibleSubTypes}}> [
										<div class="subEntryTop"> [
											{{with $s := index $props "status"}}
											<div class="statusDot statusSelector statusLabeler" data-path="{{$ent.Path}}" data-entry-type="{{$entType}}" data-value="{{$s.Value}}"> []
											{{end}}
											<a class="subEntryName" href="{{$ent.Path}}" style="color:black;font-weight:bold;overflow-wrap:anywhere;"> [{{$ent.Name}}]
										]
										<div class="subEntryBottom"> [
											<div class="subEntryBottomLeft"> [
												{{$thumbnailPath := index $.ThumbnailPath $ent.Path}}
												<a class="thumbnail {{if $ent.HasThumbnail}}exists{{else if $thumbnailPath}}inherited{{end}}" style="display:flex;color:black;text-decoration:none;" href="{{$ent.Path}}"> [
													<div class="thumbnailContainer"> [
														<img class="thumbnailImg" src="/thumbnail{{$thumbnailPath}}" width="96px" height="54px" alt=""> []
													]
													<form class="updateThumbnailForm" action="/api/{{if $ent.HasThumbnail}}update{{else}}add{{end}}-thumbnail" method="POST" enctype="multipart/form-data"> [
														<input name="path" type="hidden" value="{{$ent.Path}}"> []
														<label class="updateThumbnailButton thumbnailButton"> [+
															<input class="updateThumbnailInput nodisplay" name="file" type="file" accept="image/jpeg, image/png"> []
														]
														<input readonly name="back_to_referer" type="hidden" value="1"> []
													]
													<form class="deleteThumbnailForm" action="/api/delete-thumbnail" method="POST"> [
														<input name="path" type="hidden" value="{{$ent.Path}}"> []
														<label class="deleteThumbnailButton thumbnailButton"> [-]
														<input readonly name="back_to_referer" type="hidden" value="1"> []
													]
												]
												{{$assignee := index $props "assignee"}}
												{{if $assignee}}
												<input class="assigneeInput" data-path="{{$ent.Path}}" data-assignee="{{$assignee.Value}}" placeholder="assignee"> []
												{{end}}
												{{if index $.ShowGrandSub $ent.Type}}
													<div class="grandSubArea" style="display:flex;flex-direction:column;"> [
														<div class="grandSubEntries {{if and $possibleSubTypes (not (has $possibleSubTypes ","))}}addable{{end}}"> [
															{{range $gs := (index $.GrandSubSummary $ent.Path)}}
																<div class="summaryDot summaryLabeler grandSubEntry" data-entry-type="{{$gs.Type}}" data-name="{{$gs.Name}}" data-value="{{$gs.Status}}" data-assignee="{{$gs.Assignee}}"> [{{$gs.Name}}]
															{{end}}
															<div class="summaryDot grandSubAdderLoader"> [+]
														]
														<div class="summaryDot grandSubAdder"> [
															<div class="grandSubAdderInput" contenteditable="true" style="flex:1;"> []
															<div> [+]
														]
													]
												{{end}}
											]
											<div class="subEntryProperties"> [
												{{range $name := $propFilters}}
													{{$p := index $props $name}}
													<div class="subEntryInfo info {{if not $p}}invalid{{end}}" data-category="property" data-name="{{$name}}" data-type="{{if $p}}{{$p.Type}}{{end}}" data-value="{{if $p}}{{$p.Value}}{{end}}"> [
														<div class="subEntryInfoTop"> [
															<div class="infoTitle"> [
																<div> [{{$name}}]
																{{if $p}}<div class="recentlyUpdatedDot {{if not (recentlyUpdated $p)}}invisible{{end}}"> []{{end}}
																<div style="flex:1;"> []
															]
															<a class="subEntryInfoHistoryLink" href="/logs?path={{$ent.Path}}&category=property&name={{$name}}"> [&middot;&middot;&middot;]
														]
														{{if $p}}
														<div class="{{if $p.ValueError}}invalid{{end}} infoValue"> [{{brLines $p.Value}}{{$p.ValueError}}]
														{{end}}
													]
												{{end}}
											]
										]
									]
									{{end}}
								]
							{{$j = inc $j}}
							{{end}}
						{{end}}
					]
				{{$i = inc $i}}
				{{end}}
				]
				<div id="footer" style="position:fixed;left:0;bottom:0;width:100%;"> [
					<div id="infoUpdater" class="infoModifier nodisplay"> [
						<div class="infoModifierTopBar" style="background-color:#E0EEEE;"> [
							<div class="entryLabel" style=""> []
							<div style="border-radius:3px;background-color:#BDD;width:1rem;height:1rem;display:flex;justify-content:center;align-items:center;font-size:0.5rem;cursor:pointer" onclick="hideFooter()"> [&#x2715]
						]
						<div style="display:flex;gap:0.5rem;padding:0.7rem;"> [
							<div class="nameLabel" style="width:8rem;border:0;display:flex"> []
							<form class="valueForm" action="/api/update-property" style="flex:1;display:flex;gap:0.5rem;margin-bottom:1rem" method="POST"> [
								<input name="path" class="entryInput" type="hidden"> []
								<input name="name" class="nameInput" type="hidden"> []
								<input name="ctg" class="categoryInput" type="hidden"> []
								<input name="type" class="typeInput typeHolder" type="hidden"> []
								<textarea name="value" class="valueInput" style="flex:1" rows="1"> []
								<img class="updatingMarker invisible" src="/asset/update.svg" style="width:1rem;height:1rem;position:relative;top:0;margin-top:0.5rem;margin-left:-2rem;margin-right:0.5rem;"> []
								<input readonly name="back_to_referer" type="hidden" value="1"> []
								<button style="width:5rem"> [Update]
							]
						]
					]
					<div id="infoAdder" class="infoModifier nodisplay"> [
						<div class="infoModifierTopBar" style="background-color:#F5E0E0;"> [
							<div class="entryLabel" style=""> []
							<div style="border-radius:3px;background-color:#ECC;width:1rem;height:1rem;display:flex;justify-content:center;align-items:center;font-size:0.5rem;cursor:pointer" onclick="hideFooter()"> [&#x2715]
						]
						<div style="display:flex;gap:0.5rem;padding:0.7rem;background-color:inherit;"> [
							<form class="valueForm" action="/api/add-property" style="flex:1;display:flex;gap:0.5rem;margin-bottom:1rem" method="POST"> [
								<input name="path" class="entryInput" type="hidden"> []
								<input name="name" class="nameInput" style="box-sizing:border-box;height:1.5rem"> []
								<input name="ctg" class="categoryInput" type="hidden"> []
								<select name="type" class="typeSelect typeHolder" style="box-sizing:border-box;height:1.5rem;width:8rem"> [/* options will be added from script when event occurs */]
								<textarea name="value" class="valueInput" style="flex:1" rows="1"> []
								<img class="updatingMarker invisible" src="/asset/update.svg" style="width:1rem;height:1rem;position:relative;top:0;margin-top:0.5rem;margin-left:-2rem;margin-right:0.5rem;"> []
								<input readonly name="back_to_referer" type="hidden" value="1"> []
								<button style="width:5rem"> [Add]
							]
						]
					]
					<div id="statusBar" style="display:flex;padding:0 0.5rem;align-items:center;background-color:white;height:1.5rem;border-top:1px solid #DDD;font-size:0.8rem;"> []
				]
				<div id="infoContextMenu" class="invisible" style="position:absolute;display:flex;flex-direction:column;width:4rem;padding:0.3rem 0.6rem;gap:0.3rem;border:1px solid #AAA;border-radius:2px;background-color:#F4F4F4;font-size:0.75rem;"> [
					<a class="infoHistory" style="color:black;"> [History]
					<a class="infoDelete nodisplay" style="color:#A22;cursor:pointer;"> [Delete <!-- temporarily hidden -->]
				]
				<div id="userAutoCompleteMenu" class="invisible"> []
				{{range $entType, $ps := $.PossibleStatus}}
				<div id="selectStatusMenu-{{$entType}}" class="selectStatusMenu invisible"> [
					<div class="selectStatusMenuItem" data-value=""> [
						<div class="selectStatusMenuItemDot statusDot statusDot-{{$entType}}-"> []
						<div class="selectStatusMenuItemValue" style="color:#888888;"> [(none)]
					]
					{{range $s := $ps}}
					<div class="selectStatusMenuItem" data-value="{{$s.Name}}"> [
						<div class="selectStatusMenuItemDot statusDot" data-entry-type="{{$entType}}" data-value="{{$s.Name}}"> []
						<div class="selectStatusMenuItemValue"> [{{$s.Name}}]
					]
					{{end}}
				]
				<div id="statusLabel" class="nodisplay"> []
				{{end}}
			]
		]
		<div id="deleteEntryDialogBackground" class="invisible"> [
			<div id="deleteEntryDialog"> [
				<div id="deleteEntryDialogTitle"> [Delete Entry]
				<div id="deleteEntryDialogContent"> [
					<div id="deleteEntryDialogEntry" style="color:#A22;margin-bottom:0.8rem;"> []
					<div id="deleteEntryDialogNoSub"> [It does not have sub entries.]
					<div id="deleteEntryDialogHasSub"> [It will also delete <div id="deleteEntryDialogTotalSub" style="display:inline-block;color:#A22;"> [] sub entries.]
				]
				<div style="padding:0.3rem;border-top:1px solid #CCC;border-radius:0 0 2px 2px;background-color:#EEE;display:flex;justify-content:right;gap:0.3rem;"> [
					<div id="confirmDeleteEntryButton" class="deleteEntryDialogButton" > [Delete]
					<div id="cancelDeleteEntryButton" class="deleteEntryDialogButton"> [Cancel]
				]
			]
		]
	]
]

<script> [```{{template "entry.bml.js" .}}```]

