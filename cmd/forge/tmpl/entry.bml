<!doctype html>
<html> [
	<head> [
		{{template "style"}}
	]
	<body> [
		{{template "nav" $}}
		<div style="flex:1;display:flex;justify-content:space-between"> [
			<div name="left" style="flex:1;border-right:1px solid #DDD;padding:1rem;background-color:#F7F7F7;"> [
				<h1> [
					{{pathLinks $.Entry.Path}}
				]
				<h4> [
					Sub Entry
				]
				<div> [
				{{range $i, $t := $.SubEntryTypes}}
					{{if $i}}
					<div style="height:1rem"> []
					{{end}}
					<div> [{{$t}}]
					<div style="display:grid;grid-template-columns:1fr;border-top:1px solid #DDD;border-left:1px solid #DDD"> [
						{{$entries := index $.SubEntriesByType $t}}
						{{$props := index $.SubEntryProperties $t}}
						{{$defaultProps := index $.DefaultProperties $t}}
						{{range $j, $e := $entries}}
						{{$pad := "0.5rem"}}
						<div style="display:flex;padding:{{$pad}};border-bottom:1px solid #DDD;border-right:1px solid #DDD"> [
							<a style="display:flex" href="{{$e.Path}}"> [
								<img src="/thumbnail{{$e.Path}}" height="60px" width="90px" alt="" style="border:1px solid #AAAAAA"> []
								<div style="width:{{$pad}}"> []
								<div style="width:90px;color:black"> [<b> [{{$e.Name}}]]
							]
							<div style="flex:1;display:grid;grid-template-columns:repeat(4, 1fr)"> [
								{{range $name := $defaultProps}}
									<div> [
										<div style="font-size:0.75rem;color:#AAA"> [{{$name}}]
										{{$p := index $props $name}}
										{{if $p}}
										<div style="height:0.2rem"> []
										<div style="font-size:0.8rem"> [{{$p.Value}}]
										{{end}}
									]
								{{end}}
							]
						]
						{{end}}
					]
				{{end}}
				]
			]
			<div name="right" style="width:600px;padding:1rem;"> [
				{{if eq $.Tab "view"}}
					{{template "entry-view-tab" $}}
				{{else if eq $.Tab "edit"}}
					{{template "entry-edit-tab" $}}
				{{else if eq $.Tab "delete"}}
					{{template "entry-delete-tab" $}}
				{{end}}
			]
		]
	]
]

<script> [`
function toggleCollapse() {
	let collapsible = this.parentElement;
	let content = collapsible.getElementsByClassName("content")[0];
	if (content.style.display == "none") {
		content.style.display = "block";
	} else {
		content.style.display = "none";
	}
}

var coll = document.getElementsByClassName("collapsible");
for (i = 0; i < coll.length; i++) {
	coll[i].getElementsByClassName("title")[0].addEventListener("click", toggleCollapse);
}
`]
